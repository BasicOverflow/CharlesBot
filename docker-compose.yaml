version: "3"

# DISCLAIMER: do not change service names willy nilly, dockerfiles depend on them 

services:

  asyncqueue:
    restart: unless-stopped
    build:
      context: ./AsyncQueue
      dockerfile: Dockerfile
    volumes:
      - .:/code
      - ./video:/data/video
      - ./audio:/data/audio
    depends_on:
      - api

  api:
    restart: unless-stopped
    build:
      context: ./api
      dockerfile: Dockerfile
    volumes:
      - .:/code
      - ./video:/data/video
      - ./audio:/data/audio
    ports: 
      - 8080:80

  
